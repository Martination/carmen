{"version":3,"sources":["components/Bootstrap.js","components/FilterListItem.js","components/CamanControls.js","components/ImgurAPI.js","components/FileControls.js","WP.png","components/CamanCanvas.js","App.js","index.js"],"names":["PresetButton","preset","presetName","onClick","active","buttonRef","useRef","myButton","current","bsButton","Button","getInstance","toggle","className","ref","id","event","type","NotificationToast","toast","setToast","status","toastText","toastRef","useEffect","myToast","bsToast","Toast","show","hide","autohide","role","aria-live","aria-atomic","aria-label","FilterListItem","filter","range","filterList","onChange","min","max","step","init","curValue","resetValue","target","value","name","attributes","htmlFor","CreatePresetList","presetList","presetsPretty","buttonList","entries","index","isActive","push","CreateFilterList","rangeList","rangeFull","rangeHalf","filters","imageUrl","imgId","a","fetch","response","blob","data","getImg","imageId","setImgData","url","options","process","then","res","ok","stauts","Error","statusText","json","test","getAlbum","albumId","images","catch","err","console","error","FileControls","updateCanvas","editPaneRef","useState","filename","setFilename","imgurImgData","setImgurImgData","toastDisplay","toastInfo","setToastInfo","imgurUrlRef","setImage","file","reader","FileReader","readAsDataURL","onload","imageType","result","match","img","Image","src","form","regex","album","split","substring","log","message","uploadConfirmation","link","deletehash","displayLink","replace","href","rel","deleteConfirmation","success","getImgBlob","text","style","width","placeholder","cursor","aria-labelledby","data-bs-toggle","aria-expanded","callback","deleteImgur","newFilename","canvas","firstChild","toDataURL","aria-hidden","toString","formData","FormData","Object","key","append","uploadImg","accept","files","document","createElement","download","dispatchEvent","MouseEvent","caman","window","Caman","image","isRendering","prevRenderList","curRenderList","backlog","updateImgFn","throttledEventListen","throttle","Event","listen","job","JSON","stringify","DEBUG","htmlCanvas","this","render","CamanCanvas","setPresetList","setFilterList","presetToggle","setPresetToggle","updateImage","throttled","adjustmentList","revert","prototype","newList","alt","context","getContext","height","drawImage","removeAttribute","parseFloat","data-bs-target","App","ReactDOM","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.03302f89.chunk.js","sourcesContent":["import { useEffect, useRef } from 'react';\nimport { Button, Toast } from 'bootstrap';\n\nexport function PresetButton({ preset, presetName, onClick, active }) {\n  const buttonRef = useRef(null);\n\n  const myButton = buttonRef.current;\n  let bsButton = Button.getInstance(myButton);\n\n  if (!bsButton) { bsButton = new Button(myButton, { toggle: \"button\" }); }\n\n  return (\n    <div className=\"col p-1 d-grid\">\n      <button className={`preset btn btn-primary ${active ? 'active' : null}`}\n        ref={buttonRef} id={preset} onClick={(event) => { onClick(event) }} type=\"button\">\n        {`${presetName}`}\n      </button>\n    </div>\n  );\n}\n\nexport function NotificationToast({ toast, setToast, status, toastText }) {\n  const toastRef = useRef(null);\n\n  useEffect(() => {\n    const myToast = toastRef.current;\n    let bsToast = Toast.getInstance(myToast);\n\n    if (!bsToast) {\n      bsToast = new Toast(myToast, { autohide: false });\n    } else {\n      toast ? bsToast.show() : bsToast.hide();\n    }\n  }, [toast]);\n\n  return (\n    <div className=\"position-fixed bottom-0 end-0 pe-3 pb-3\">\n      <div className=\"toast hide\" role=\"status\" aria-live=\"polite\" aria-atomic=\"true\" ref={toastRef}>\n        <div className=\"toast-header text-primary\">\n          <i className=\"bi bi-image-fill pe-1\"></i>\n          <strong className=\"me-auto\">Carmen Uploader</strong>\n          <small>{status ? \"Success\" : \"Failure\"}</small>\n          <button type=\"button\" className=\"btn-close\" aria-label=\"Close\"\n            onClick={() => setToast(false)} />\n        </div>\n        <div className=\"toast-body text-dark\">{toastText}</div>\n      </div>\n    </div>\n  );\n}\n","function FilterListItem({ filter, range, filterList, onChange }) {\n  const min = range['min'] != null ? range['min'] : -100;\n  const max = range['max'] != null ? range['max'] : 100;\n  const step = range['step'] || 1;\n  const init = range['init'] || 0;\n  const curValue = (filterList[filter] != null) ? filterList[filter] : init;\n\n  function resetValue(event) {\n    event.target.value = init;\n    event.target.name = event.target.attributes.name.value;\n    onChange(event, init);\n  }\n\n  return (\n    <div className=\"col\">\n      <div className=\"row gx-1 hover\">\n        <button className=\"col-3 reset btn-secondary border-0 text-capitalize\"\n          name={filter} htmlFor={filter} onClick={resetValue}>{filter}</button>\n\n        <div className=\"col-8\">\n          <input id={filter} name={filter} aria-label={filter} type=\"range\"\n            min={min} max={max} step={step} className=\"form-range slider pt-2\"\n            value={curValue} onChange={(event) => onChange(event, init)} />\n        </div>\n\n        <button className=\"reset col-1 btn-secondary border-0\"\n          type=\"button\" name={filter} onClick={resetValue}>{curValue}</button>\n      </div>\n    </div>\n  );\n};\n\nexport default FilterListItem;\n","import { PresetButton } from './Bootstrap';\nimport FilterListItem from './FilterListItem';\n\nexport function CreatePresetList({ presetList, onClick }) {\n  const presets = [\n    \"greyscale\", \"invert\", \"vintage\", \"lomo\", \"clarity\", \"sinCity\", \"sunrise\",\n    \"crossProcess\", \"orangePeel\", \"love\", \"grungy\", \"jarques\", \"pinhole\", \"oldBoot\",\n    \"glowingSun\", \"hazyDays\", \"herMajesty\", \"nostalgia\", \"hemingway\", \"concentrate\"\n  ];\n\n  const presetsPretty = [\n    \"Grayscale\", \"Invert\", \"Vintage\", \"Lomo\", \"Clarity\", \"Sin City\", \"Sunrise\",\n    \"Cross Process\", \"Orange Peel\", \"Love\", \"Grungy\", \"Jarques\", \"Pinhole\", \"Old Boot\",\n    \"Glowing Sun\", \"Hazy Days\", \"Her Majesty\", \"Nostalgia\", \"Hemingway\", \"Concentrate\"\n  ];\n\n  let buttonList = [];\n  for (const [index, preset] of presets.entries()) {\n    const isActive = (presetList === preset) ? true : false;\n    buttonList.push(\n      <PresetButton key={preset} preset={preset} presetName={presetsPretty[index]}\n        onClick={onClick} active={isActive} />\n    );\n  }\n  return buttonList;\n}\n\nexport function CreateFilterList({ filterList, onChange }) {\n  // -100 to 100\n  const filtersFullRange = [\"brightness\", \"contrast\", \"vibrance\", \"saturation\", \"exposure\"];\n  // 0 to 100\n  const filtersHalfRange = [\"hue\", \"sepia\", \"noise\", \"sharpen\", \"clip\"];\n  const filtersSpecial = { \"gamma\": { \"min\": 0, \"init\": 1, \"max\": 10, \"step\": 0.1 } };\n\n  let rangeList = {};\n\n  const rangeFull = { \"min\": -100, \"init\": 0, \"max\": 100 };\n  // Must be for...of; for...in replaces names with indicies\n  for (const filter of filtersFullRange) { rangeList[filter] = rangeFull; }\n\n  const rangeHalf = { \"min\": 0, \"init\": 0, \"max\": 100 };\n  for (const filter of filtersHalfRange) { rangeList[filter] = rangeHalf; }\n  rangeList = { ...rangeList, ...filtersSpecial };\n\n  let filters = [];\n  // Must be for...in, rangeList isn't iterable\n  for (const filter in rangeList) {\n    filters.push(\n      <FilterListItem key={filter} filter={filter} range={rangeList[filter]}\n        filterList={filterList} onChange={onChange} />\n    );\n  }\n\n  return filters;\n}\n","export async function getImgBlob(imageUrl, imgId) {\n  if (imageUrl) {\n    let response = await fetch(imageUrl);\n    let data = await response.blob();\n    data.name = imgId;\n\n    return data;\n  }\n}\n\nexport function getImg(imageId, setImgData) {\n\n  let url = `https://api.imgur.com/3/image/${imageId}`;\n\n  const options = {\n    'method': 'GET',\n    'headers': {\n      'Authorization': `Client-ID ${process.env.REACT_APP_CLIENTID}`,\n    },\n    'maxRedirects': 20,\n  };\n\n  return fetch(url, options)\n    .then((res) => {\n      if (!res.ok || res.status < 200 || res.stauts >= 300) {\n        throw new Error(`Error ${res.status}: ${res.statusText}`);\n      }\n      return res.json();\n    })\n    .then((data) => {\n      const mime = /image/;\n      if (!mime.test(data.data.type)) {\n        throw new Error(`Unsupported Filetype: ${data.data.type}`);\n      }\n      setImgData(data.data);\n    });\n}\n\nexport function getAlbum(albumId) {\n\n  let url = `https://api.imgur.com/3/album/${albumId}`;\n\n  const options = {\n    'method': 'GET',\n    'headers': {\n      'Authorization': `Client-ID ${process.env.REACT_APP_CLIENTID}`,\n    },\n    'maxRedirects': 20,\n  };\n\n  return fetch(url, options)\n    .then((res) => res.json())\n    .then((data) => { return data.data.images[0].id; })\n    .catch((err) => console.error(err));\n}\n\n\nexport function uploadImg(img, callback) {\n\n  img.data = img.data.toString().replace(/data:.+?,/, \"\");\n  let formData = {\n    'name': img.name,\n    'image': img.data,\n    'type': 'base64',\n  };\n\n  const form = new FormData();\n  for (let [key, value] of Object.entries(formData)) {\n    form.append(key, value);\n  }\n\n  const url = 'https://api.imgur.com/3/image';\n  const options = {\n    'method': 'POST',\n    'headers': {\n      'Authorization': `Client-ID ${process.env.REACT_APP_CLIENTID}`,\n    },\n    'maxRedirects': 20,\n    'body': form,\n  };\n\n  return fetch(url, options)\n    .then((res) => res.json())\n    .then((data) => callback(data.data));\n}\n\nexport function deleteImgur(deletehash, callback) {\n\n  let url = `https://api.imgur.com/3/image/${deletehash}`;\n\n  const options = {\n    'method': 'DELETE',\n    'headers': {\n      'Authorization': `Client-ID ${process.env.REACT_APP_CLIENTID}`,\n    },\n    'maxRedirects': 20,\n  };\n\n  return fetch(url, options)\n    .then((res) => {\n      if (!res.ok || res.status < 200 || res.stauts >= 300) {\n        throw new Error(`Error ${res.status}: ${res.statusText}`);\n      }\n      return res.json();\n    })\n    .then((data) => callback(data));\n}\n","import { useEffect, useState, useRef } from 'react';\n\nimport { getImg, getImgBlob, getAlbum, uploadImg, deleteImgur } from './ImgurAPI';\nimport { NotificationToast } from './Bootstrap';\n\nfunction FileControls({ updateCanvas, editPaneRef }) {\n  const [filename, setFilename] = useState('');\n  const [imgurImgData, setImgurImgData] = useState({});\n  const [toastDisplay, setToast] = useState(false);\n  const [toastInfo, setToastInfo] = useState({ 'success': true, 'text': '' });\n  const imgurUrlRef = useRef(null);\n\n\n  /*\n   * Direct image/file changes\n   */\n\n  /* Read a file to update canvas */\n  function setImage(file) {\n    const reader = new FileReader();\n    if (file) {\n      setFilename(file.name);\n      // read data as URL\n      reader.readAsDataURL(file);\n    }\n\n    reader.onload = () => {\n      const mime = /image/;\n      const base64 = /data:.+?;/;\n      const imageType = reader.result.match(base64)[0];\n      const imageMime = mime.test(imageType);  // Test if base64 header says \"image\"\n\n      if (!imageMime) {\n        setToastInfo({ 'success': false, 'text': `Unsupported Filetype: ${imageType}` });\n        setToast(true);\n        return;\n      }\n\n      const img = new Image();\n      img.src = reader.result;\n\n      img.onload = () => { updateCanvas(img); };\n      setToastInfo({ 'success': true, 'text': '' });\n      setToast(false);\n    };\n  }\n\n  /* Take the file from the file browser and set it */\n  function uploadFile(event) {\n    const uploadedFile = event.target.files[0];\n    setImage(uploadedFile);\n  }\n\n  function downloadImage() {\n\n    const newFilename = filename ? ('carmen-edited_' + filename) : 'carmen-edited.jpg';\n    console.log('Downloading', newFilename);\n\n    const parent = editPaneRef.current;\n    const canvas = parent.firstChild;\n\n    // create link\n    const link = document.createElement('a');\n    link.download = newFilename;\n    link.href = canvas.toDataURL('image/jpeg', 1);\n    link.dispatchEvent(new MouseEvent('click'));\n  }\n\n\n  /*\n   *  ImgurAPI.js calls\n   */\n\n  /* Import image from form textbox */\n  async function importImgur() {\n    const form = imgurUrlRef.current;\n    const value = form.value;\n\n    if (!value) {\n      setToastInfo({ 'success': false, 'text': 'Must provide an Imgur URL.' });\n      setToast(true);\n      return;\n    }\n\n    // imageID is 7 chars long\n    const regex = /\\w{7}/g;\n    const album = /\\/gallery\\/|\\/a\\//g;\n\n    let imgId;\n    if (album.test(value)) {\n      imgId = value.split(album)[1];\n      imgId = imgId.substring(0, 7);  // In case anything is after the id\n\n      // Do album look up to get real cover imgId\n      imgId = await getAlbum(imgId);\n      console.log(imgId);\n\n    } else if (regex.test(value)) {\n      imgId = value.match(regex)[0];\n      console.log(imgId);\n\n    } else {\n      const message = 'No Imgur Image ID found. Please use the direct URL to the image.';\n      setToastInfo({ 'success': false, 'text': message });\n      setToast(true);\n      return;\n    }\n\n    // Get imgId URL and update canvas\n    getImg(imgId, setImgurImgData)\n      .then(() => {\n        setToastInfo({ 'success': true, 'text': '' });\n        setToast(false);\n      })\n      .catch((err) => {\n        console.log(err.message);\n        setToastInfo({ 'success': false, 'text': err.message });\n        setToast(true);\n      });\n  }\n\n  useEffect(() => {\n    getImgBlob(imgurImgData.link, imgurImgData.id)\n      .then((result) => setImage(result))\n      .catch((err) => console.error(err));\n  }, [imgurImgData]); // eslint-disable-line react-hooks/exhaustive-deps\n\n  function exportImgur() {\n    const newFilename = filename ? ('carmen-edited_' + filename) : 'carmen-edited.jpg';\n    const parent = editPaneRef.current;\n    const canvas = parent.firstChild;\n\n    let img = {};\n    img.name = newFilename;\n    img.data = canvas.toDataURL('image/jpeg', 1);\n\n    const div =\n      <div className=\"d-flex align-items-center\"> Uploading...\n        <div className=\"spinner-border ms-auto\" role=\"status\" aria-hidden=\"true\"></div>\n      </div>;\n    setToastInfo({ 'success': true, 'text': div });\n    setToast(true);\n\n    try {\n      uploadImg(img, uploadConfirmation);\n    } catch (err) {\n      console.log(err);\n      setToastInfo({ 'success': false, 'text': err.message });\n      setToast(true);\n    }\n  }\n\n  /* Display a toast for either success or failure */\n  function uploadConfirmation(result) {\n    console.log(result);\n\n    if (!result || result.error) {\n      setToastInfo({ 'success': false, 'text': `Error: ${result?.error || 'Unknown Error'}` });\n      setToast(true);\n      return;\n    }\n\n    const link = result.link || '';\n    const deletehash = result.deletehash || '';\n\n    const header = /http(s)?:\\/\\/(www.)?/g;\n    const displayLink = link.replace(header, '');\n\n    const a = <a href={link} target=\"_blank\" rel=\"noreferrer\">{displayLink}</a>;\n    const div = <div>Image uploaded to {a}. The code to delete it is <samp>{deletehash}</samp>.</div>;\n    setToastInfo({ 'success': true, 'text': div });\n    setToast(true);\n  }\n\n  /* Delete an Image from Imgur using the deletehash */\n  function deleteImage() {\n\n    const form = imgurUrlRef.current;\n    const value = form.value;\n\n    // deleteHash is 15 chars long\n    const hash = /\\w{15}/;\n\n    const deletehash = value.match(hash);\n    if (!deletehash) {\n      const error = 'No delete code found. Paste the 15 character delete code into the text box.';\n      setToastInfo({ 'success': false, 'text': error });\n      setToast(true);\n      return;\n    }\n\n    deleteImgur(deletehash, deleteConfirmation)\n      .catch((err) => {\n        console.log(err.message);\n        setToastInfo({ 'success': false, 'text': err.message });\n        setToast(true);\n      });\n  }\n\n  function deleteConfirmation(result) {\n    console.log(result);\n\n    if (!result || !result.success || result.error) {\n      setToastInfo({ 'success': false, 'text': `Error: ${result?.error || 'Unknown Error'}` });\n      setToast(true);\n      return;\n    }\n\n    setToastInfo({ 'success': true, 'text': 'Image successfully deleted.' });\n    setToast(true);\n  }\n\n\n  return (\n    <>\n      <NotificationToast toast={toastDisplay} setToast={setToast}\n        status={toastInfo.success} toastText={toastInfo.text} />\n\n      <div className=\"row my-2 d-flex align-items-end\">\n        <div className=\"col\">\n          <label htmlFor=\"formImgur\" className=\"form-label\">Import Image from or Upload to Imgur</label>\n          <div className=\"btn-group\" style={{ width: '100%' }}>\n\n            <input id=\"formImgur\" ref={imgurUrlRef} type=\"text\" placeholder=\"https://imgur.com/...\"\n              className=\"form-control btn bg-light border-light text-start user-select-auto pe-0\"\n              style={{ cursor: 'text' }} aria-labelledby=\"formImgur\" />\n\n            <button type=\"button\" data-bs-toggle=\"dropdown\" aria-expanded=\"false\"\n              className=\"btn btn-light dropdown-toggle dropdown-toggle-split\">\n              <span className=\"visually-hidden\">Dropdown Menu</span>\n            </button>\n            <ul className=\"dropdown-menu dropdown-menu-end dropdown-menu-dark\">\n              <li><button className=\"dropdown-item\" onClick={deleteImage}>\n                Delete previously uploaded image\n              </button></li>\n            </ul>\n          </div>\n        </div>\n\n        <div className=\"col col-auto text-center ps-0\">\n          <button id=\"downloadImage\" className=\"btn btn-primary\" type=\"submit\" onClick={importImgur}>\n            <i className=\"d-block d-md-none bi bi-cloud-download\" />\n            <span className=\"d-none d-md-block\">Import from Imgur</span>\n          </button>\n        </div>\n        <div className=\"col col-auto text-center ps-0\">\n          <button id=\"downloadImage\" className=\"btn btn-primary\" onClick={exportImgur}>\n            <i className=\"d-block d-md-none bi bi-cloud-upload\" />\n            <span className=\"d-none d-md-block\">Upload to Imgur</span>\n          </button>\n        </div>\n      </div>\n\n      <div className=\"row my-2 d-flex align-items-end\">\n        <div className=\"col\">\n          <label htmlFor=\"formFile\" className=\"form-label\">Upload Image from Device</label>\n\n          <input className=\"form-control\" type=\"file\" id=\"formFile\" accept=\"image/*\"\n            aria-labelledby=\"formFile\" onChange={uploadFile} />\n        </div>\n\n        <div className=\"col col-auto text-center ps-0\">\n          <button id=\"downloadImage\" className=\"btn btn-primary\" onClick={downloadImage}>\n            <i className=\"d-block d-md-none bi bi-download\" />\n            <span className=\"d-none d-md-block\">Download Image</span>\n          </button>\n        </div>\n      </div>\n    </>\n  );\n}\n\nexport default FileControls;\n","export default __webpack_public_path__ + \"static/media/WP.394371ca.png\";","import { useState, useEffect, useRef } from 'react';\nimport throttle from 'lodash/throttle';\n\nimport { CreatePresetList, CreateFilterList } from './CamanControls';\nimport FileControls from './FileControls';\n\nimport image from './../WP.png';\n// import image from './../WPj.jpg';\n// import image from './../142.jpg';\n\nconst caman = window.Caman;\n\nconsole.log(image, typeof (image));\n\n\n// TO DO:\n// channels {red: [-100,100], green: [-100,100], blue:[-100:100]}\n// stackBlur [0, 20]?\n// colorize [R,G,B, [0-100]] || ['#eee', [0-100]]\n// curves [[R,G,B], [P0x,P1x], [P2], [P3], [P4]]\n// fillColor [R,G,B] || ['#eee']\n// Greyscale(), Invert()\n\n// Stage 2\n// Crop, Resize, Preset strength, undo/redo\n// vignette, rectangularVignette, tiltShift, radialBlur,\n// boxBlur?, heavyRadialBlur, gaussianBlur, motionBlur,\n// edgeEnhance, edgeDetect, emboss, posterize,\n\n\nlet isRendering = false;\nlet prevRenderList = {}, curRenderList = {};\nlet backlog = 0;\nlet updateImgFn = () => { };\nconst throttledEventListen = throttle((curRenderList) => (updateImgFn(curRenderList)), 1000);\n\ncaman.Event.listen('processStart', (job) => {\n  console.log('Start:', job.name);\n  isRendering = true;\n});\n\ncaman.Event.listen('processComplete', (job) => {\n  console.log('Finish:', job.name);\n  isRendering = false;\n  backlog = 0;\n  if (JSON.stringify(prevRenderList) !== JSON.stringify(curRenderList)) {\n    throttledEventListen(curRenderList);\n  }\n});\n\n\nwindow.Caman.DEBUG = true\nconst htmlCanvas = '#canvas';\ncaman(htmlCanvas, function () {\n  this.render();\n});\n\nconst CamanCanvas = () => {\n  const [presetList, setPresetList] = useState('');\n  const [filterList, setFilterList] = useState({});\n  const [presetToggle, setPresetToggle] = useState(false);\n  const editPaneRef = useRef(null);\n\n  updateImgFn = updateImage;  // Save function so Caman Event listener can call it\n\n\n  // Throttled could take an options object, but it appears to work fine with default\n  const throttled = useRef(throttle((curRenderList) => (updateImage(curRenderList)), 100));\n\n  /* Combine presets and filters into master adjustment list and update the image */\n  useEffect(() => {\n\n    // console.log(\"New list\", filterList);\n\n    // Check for invalid presets\n    let preset = presetList;\n    if (presetList && !caman.prototype[presetList]) {\n      console.log(`${presetList} is not a valid preset.`);\n      setPresetList(preset = '');\n    }\n\n    // Check for invalid filters\n    let filters = { ...filterList };\n    for (const filter in filterList) {\n      if (!caman.prototype[filter]) {\n        console.log(`${filter} is not a valid filter.`);\n        delete filters[filter];\n        setFilterList(filters);\n      }\n    }\n\n    // Combine the two lists\n    let newList;\n    if (preset) { newList = { [preset]: 1 }; }\n    if (filterList !== {}) { newList = { ...newList, ...filters }; }\n    curRenderList = newList;\n\n    // If it's not identical, re-render Caman\n    console.log(\"New list\", newList);\n    if (JSON.stringify(prevRenderList) !== JSON.stringify(newList)) {\n      console.log(newList, prevRenderList, curRenderList, isRendering, backlog);\n      if (!isRendering) {\n        // if (backlog) { isRendering = true; }\n        console.log(\"Throttled New list\", newList);\n        throttled.current(newList);   // Throttled calls updateImage()\n        backlog += 1;\n      }\n    }\n  }, [filterList, presetList]);\n\n\n  /* Sliders Callback */\n  function updateFilters(event, init) {\n    const filter = event.target.name;\n    const value = parseFloat(event.target.value);\n    console.log('Updating', filter);\n\n    let newList;\n    if (value === init) {\n      // console.log(`Reset ${filter} to default`)\n      newList = { ...filterList };\n      delete newList[filter];\n    } else {\n      newList = { ...filterList, [filter]: value };\n    }\n\n    setFilterList(newList);\n  }\n\n  /* Button Callback */\n  function updatePresets(event) {\n    const preset = event.target.id;\n    // function to guarantee using the latest presetList\n    setPresetList((presetList) => presetList === preset ? '' : preset);\n  }\n\n\n  function updateImage(adjustmentList) {\n    prevRenderList = adjustmentList;\n    console.log(\"Update image\", adjustmentList, prevRenderList);\n    caman(htmlCanvas, function () {\n      console.log('~~~~ UPDATE IMAGE ~~~~');\n      console.log(adjustmentList);\n\n      this.revert(false);\n      for (const filter in adjustmentList) {\n\n        if (this[filter]) {\n          this[filter](adjustmentList[filter]);\n        } else {\n          console.log(`~${filter}~ is not a valid filter.`);\n        }\n      }\n      this.render();\n    });\n  }\n\n\n  /* Take an image object and update the canvas */\n  function updateCanvas(img) {\n    console.log(img, typeof (img));\n\n    const parent = editPaneRef.current;\n    const canvas = parent.firstChild;\n    const context = canvas.getContext('2d');\n\n    canvas.width = img.width;\n    canvas.height = img.height;\n    context.drawImage(img, 0, 0, img.width, img.height);\n    canvas.removeAttribute('data-caman-id');\n\n    updateImage(curRenderList);\n  }\n\n\n  return (\n    <>\n      <div id=\"editPane\" ref={editPaneRef} className=\"edit-pane bg-gray container-lg text-center p-4 lh-1\">\n        <img id=\"canvas\" alt=\"Editing Canvas\" className=\"img-fluid\" aria-label=\"Editing Canvas\" src={image} />\n      </div>\n\n      <FileControls updateCanvas={updateCanvas} editPaneRef={editPaneRef} />\n\n      <div id=\"filterHolder\">\n        <div id=\"filterList\" className=\"container overflow-hidden bg-dark text-center my-3 p-2\">\n\n          <div className=\"row row-cols-1 row-cols-md-2 center\">\n            <CreateFilterList filterList={filterList} onChange={updateFilters} />\n          </div>\n\n          <hr />\n          <div className=\"py-2\">\n            <button className=\"btn btn-primary\" onClick={() => setPresetToggle(!presetToggle)}\n              data-bs-target=\"#collapseTarget\" data-bs-toggle=\"collapse\">\n              <i className={\"px-2 bi \" + (presetToggle ? \"bi-chevron-compact-up\" : \"bi-chevron-compact-down\")} />\n              Presets\n              <i className={\"px-2 bi \" + (presetToggle ? \"bi-chevron-compact-up\" : \"bi-chevron-compact-down\")} />\n            </button>\n\n            <div className=\"collapse pt-2\" id=\"collapseTarget\">\n              <div className=\"row row-cols-2 row-cols-sm-3 row-cols-md-4 row-cols-lg-6 m-1\">\n                <CreatePresetList presetList={presetList} onClick={updatePresets} />\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </>\n  );\n}\n\nexport default CamanCanvas;\n","import CamanCanvas from './components/CamanCanvas';\n\nfunction App() {\n\n  return (\n    <div className=\"App container text-light\">\n\n      <div className=\"bg-dark px-4 py-1 my-3\">\n        <h1 className=\"text-primary display-2\">\n          <i className=\"bi bi-image-fill\"></i> Carmen\n        </h1>\n        <div>\n          Caman + React <span className=\"vertical-line\"> </span>\n          Browser Based Image Editing <span className=\"vertical-line\"> </span>\n          <a href=\"http://camanjs.com/\">CamanJS</a> <span className=\"vertical-line\"> </span>\n          <a href=\"https://github.com/Martination/carmen\">\n            GitHub Repo</a>\n        </div>\n      </div>\n\n      <CamanCanvas />\n\n      <div className=\"text-center pb-3\">\n        &#169; 2021 <a href=\"https://martination.github.io/\">Martin Green</a>\n      </div>\n    </div>\n  );\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\nimport \"./custom.scss\";\n\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}