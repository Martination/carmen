(this.webpackJsonpcarmen=this.webpackJsonpcarmen||[]).push([[0],{32:function(e,t,n){},33:function(e,t,n){"use strict";n.r(t);var a=n(2),c=n.n(a),i=n(13),s=n.n(i),r=n(6),o=n(1),l=n(3),d=n(14),j=n(10),b=n(9),m=n.n(b),u=n(0),h=function(e,t,n){e.target.value=t,e.target.name=e.target.attributes.name.value,n(e,t)},g=function(e){var t=e.filter,n=e.range,a=e.filterList,c=e.onChange,i=null!=n.min?n.min:-100,s=null!=n.max?n.max:100,r=n.step||1,o=n.init||0,l=null!=a[t]?a[t]:o;return Object(u.jsx)("div",{className:"col",children:Object(u.jsxs)("div",{className:"row gx-1 hover",children:[Object(u.jsx)("label",{name:t,className:"col-3",onClick:function(e){return h(e,o,c)},children:t}),Object(u.jsx)("div",{className:"col-8",children:Object(u.jsx)("input",{id:t,name:t,className:"form-range slider",type:"range",min:i,max:s,step:r,value:l,onChange:function(e){return c(e,o)}})}),Object(u.jsx)("span",{name:t,className:"col-1",onClick:function(e){return h(e,o,c)},children:l})]})})},O=n.p+"static/media/WP.394371ca.png",p=window.Caman;function v(e){var t=e.preset,n=e.presetName,c=e.onClick,i=e.active,s=Object(a.useRef)(),r=s.current,o=j.a.getInstance(r);return o||(o=new j.a(r,{toggle:"button"})),Object(u.jsx)("div",{className:"col p-1 d-grid",children:Object(u.jsx)("button",{className:"btn btn-primary ".concat(i?"active":null),ref:s,id:t,onClick:function(e){c(e)},type:"button",children:"".concat(n)})})}function f(e){var t,n=e.presetList,a=e.onClick,c=["Vintage","Lomo","Clarity","Sin City","Sunrise","Cross Process","Orange Peel","Love","Grungy","Jarques","Pinhole","Old Boot","Glowing Sun","Hazy Days","Her Majesty","Nostalgia","Hemingway","Concentrate"],i=[],s=Object(d.a)(["vintage","lomo","clarity","sinCity","sunrise","crossProcess","orangePeel","love","grungy","jarques","pinhole","oldBoot","glowingSun","hazyDays","herMajesty","nostalgia","hemingway","concentrate"].entries());try{for(s.s();!(t=s.n()).done;){var r=Object(l.a)(t.value,2),o=r[0],j=r[1],b=!!n[j];i.push(Object(u.jsx)(v,{preset:j,presetName:c[o],onClick:a,active:b},j))}}catch(m){s.e(m)}finally{s.f()}return i}function x(e,t){for(var n={},a={min:-100,init:0,max:100},c=0,i=["brightness","contrast","vibrance","saturation","exposure"];c<i.length;c++){n[i[c]]=a}for(var s={min:0,init:0,max:100},r=0,l=["hue","sepia","noise","sharpen","clip"];r<l.length;r++){n[l[r]]=s}n=Object(o.a)(Object(o.a)({},n),{gamma:{min:0,init:1,max:10,step:.1}});var d=[];for(var j in n)d.push(Object(u.jsx)(g,{filter:j,range:n[j],filterList:e,onChange:t},j));return d}var N=!1,w={},y={},C=0,k=function(){},S=m()((function(e){return k(e)}),1e3);p.Event.listen("processStart",(function(e){N=!0})),p.Event.listen("processComplete",(function(e){N=!1,C=0,JSON.stringify(w)!==JSON.stringify(y)&&S(y)}));var E="#canvas";p(E,O,(function(){this.render()}));var L=function(){var e=Object(a.useState)({}),t=Object(l.a)(e,2),n=t[0],c=t[1],i=Object(a.useState)({}),s=Object(l.a)(i,2),d=s[0],j=s[1],b=Object(a.useState)({}),h=Object(l.a)(b,2),g=h[0],v=h[1],S=Object(a.useState)(!1),L=Object(l.a)(S,2),P=L[0],R=L[1],I=Object(a.useState)(""),J=Object(l.a)(I,2),D=J[0],M=J[1],B=Object(a.useRef)(null);k=G;var A=Object(a.useRef)(m()((function(e){return G(e)}),100));Object(a.useEffect)((function(){JSON.stringify(w)!==JSON.stringify(g)&&(N||(C&&(N=!0),A.current(g),C+=1))}),[g]),Object(a.useEffect)((function(){var e=Object(o.a)(Object(o.a)({},n),d);v(y=e)}),[d,n]);function G(e){w=e,p(E,(function(){for(var t in console.log("~~~~ UPDATE IMAGE ~~~~"),console.log(e),this.revert(!1),e){if(!this[t]){console.log("".concat(t," is not a valid filter."));var n=Object(o.a)({},e);return delete n[t],this.render(),void v(n)}this[t](e[t])}this.render()}))}return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("div",{id:"editPane",ref:B,className:"edit-pane bg-gray container-lg text-center p-4 lh-1",children:Object(u.jsx)("img",{id:"canvas",alt:"Editing Canvas",className:"img-fluid",src:O})}),Object(u.jsxs)("div",{className:"row my-3",children:[Object(u.jsx)("div",{className:"col pe-0",children:Object(u.jsx)("input",{className:"form-control",type:"file",id:"formFile",onChange:function(e){var t=e.target.files[0],n=B.current.firstChild,a=n.getContext("2d"),c=new FileReader;t&&(M(t.name),c.readAsDataURL(t)),c.onload=function(){var e=new Image;e.src=c.result,e.onload=function(){n.width=e.width,n.height=e.height,a.drawImage(e,0,0,e.width,e.height),n.removeAttribute("data-caman-id"),G(g)}}}})}),Object(u.jsx)("div",{className:"col col-auto text-center",children:Object(u.jsxs)("button",{id:"downloadImage",className:"btn btn-primary",onClick:function(e){var t=D?"carmen-edited_"+D:"carmen-edited.jpg";console.log("Boop! Downloading",t);var n=B.current.firstChild,a=document.createElement("a");a.download=t,a.href=n.toDataURL("image/jpeg",1);var c=new MouseEvent("click");a.dispatchEvent(c)},children:[Object(u.jsx)("i",{className:"d-block d-md-none bi bi-download"}),Object(u.jsx)("span",{className:"d-none d-md-block",children:"Download Image"})]})})]}),Object(u.jsx)("div",{id:"filterHolder",children:Object(u.jsxs)("div",{id:"filterList",className:"container overflow-hidden bg-dark text-center my-3 p-2",children:[Object(u.jsx)("div",{className:"row row-cols-1 row-cols-md-2 center",children:x(d,(function(e,t){var n,a=e.target.name,c=parseFloat(e.target.value);console.log("Updating",a),c===t?(console.log("Reset ".concat(a," to default")),delete(n=Object(o.a)({},d))[a]):n=Object(o.a)(Object(o.a)({},d),{},Object(r.a)({},a,c)),j(n)}))}),Object(u.jsx)("hr",{}),Object(u.jsxs)("div",{className:"py-2",children:[Object(u.jsxs)("button",{className:"btn btn-primary",onClick:function(){R(!P)},"data-bs-target":"#collapseTarget","data-bs-toggle":"collapse",children:[Object(u.jsx)("i",{className:"px-2 bi "+(P?"bi-chevron-compact-up":"bi-chevron-compact-down")}),"Presets",Object(u.jsx)("i",{className:"px-2 bi "+(P?"bi-chevron-compact-up":"bi-chevron-compact-down")})]}),Object(u.jsx)("div",{className:"collapse pt-2",id:"collapseTarget",children:Object(u.jsx)("div",{className:"row row-cols-2 row-cols-sm-3 row-cols-md-4 row-cols-lg-6 m-1",children:Object(u.jsx)(f,{presetList:n,onClick:function(e){var t=e.target.id,a={};n[t]||(a[t]=1),c(a)}})})})]})]})})]})};var P=function(){return Object(u.jsxs)("div",{className:"App container text-light",children:[Object(u.jsxs)("div",{className:"bg-dark px-4 py-1 my-3",children:[Object(u.jsxs)("h1",{className:"text-primary display-2",children:[Object(u.jsx)("i",{className:"bi bi-image-fill"})," Carmen"]}),Object(u.jsxs)("div",{children:["Caman + React ",Object(u.jsx)("span",{className:"vertical-line",children:" "}),"Browser Based Image Editing ",Object(u.jsx)("span",{className:"vertical-line",children:" "}),Object(u.jsx)("a",{href:"http://camanjs.com/",children:"CamanJS"})," ",Object(u.jsx)("span",{className:"vertical-line",children:" "}),Object(u.jsx)("a",{href:"https://github.com/Martination/carmen",children:"GitHub Repo"})]})]}),Object(u.jsx)(L,{}),Object(u.jsxs)("div",{className:"text-center pb-3",children:["\xa9 2021 ",Object(u.jsx)("a",{href:"https://martination.github.io/",children:"Martin Green"})]})]})};n(32);s.a.render(Object(u.jsx)(c.a.StrictMode,{children:Object(u.jsx)(P,{})}),document.getElementById("root"))}},[[33,1,2]]]);
//# sourceMappingURL=main.58a0ce03.chunk.js.map