(this.webpackJsonpcarmen=this.webpackJsonpcarmen||[]).push([[0],{18:function(e,t,n){"use strict";(function(e){n.d(t,"c",(function(){return l})),n.d(t,"b",(function(){return u})),n.d(t,"a",(function(){return m}));var a=n(10),c=n.n(a),r=n(16),i=n(39),s=n.n(i);function o(t,n){return new Promise((function(a,c){var r=s.a.request(t,(function(t){if(t.statusCode<200||t.statusCode>=300)return c(new Error("Status Code "+t.statusCode));var n=[];t.on("data",(function(e){n.push(e)})),t.on("end",(function(){try{n=JSON.parse(e.concat(n).toString())}catch(t){c(t)}a(n)}))}));r.on("error",(function(e){c(e)})),n&&r.write(n),r.end()}))}function l(e,t){return d.apply(this,arguments)}function d(){return(d=Object(r.a)(c.a.mark((function e(t,n){var a,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=9;break}return e.next=3,fetch(t);case 3:return a=e.sent,e.next=6,a.blob();case 6:return(r=e.sent).name=n,e.abrupt("return",r);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function u(e,t){o({method:"GET",hostname:"api.imgur.com",path:"/3/image/".concat(e),headers:{Authorization:"Client-ID ".concat("4c75a4cc2da26a6")},maxRedirects:20}).then((function(e){return t(e.data)})).catch((function(e){return console.error(e)}))}function m(e){return o({method:"GET",hostname:"api.imgur.com",path:"/3/album/".concat(e),headers:{Authorization:"Client-ID ".concat("4c75a4cc2da26a6")},maxRedirects:20}).then((function(e){return e.data.images[0].id})).catch((function(e){return console.error(e)}))}}).call(this,n(7).Buffer)},66:function(e,t){},68:function(e,t){},92:function(e,t,n){},93:function(e,t,n){"use strict";n.r(t);var a=n(2),c=n.n(a),r=n(37),i=n.n(r),s=n(10),o=n.n(s),l=n(16),d=n(17),u=n(1),m=n(4),b=n(38),j=n(25),h=n(24),f=n.n(h),p=n(18),g=n(0),O=function(e,t,n){e.target.value=t,e.target.name=e.target.attributes.name.value,n(e,t)},x=function(e){var t=e.filter,n=e.range,a=e.filterList,c=e.onChange,r=null!=n.min?n.min:-100,i=null!=n.max?n.max:100,s=n.step||1,o=n.init||0,l=null!=a[t]?a[t]:o;return Object(g.jsx)("div",{className:"col",children:Object(g.jsxs)("div",{className:"row gx-1 hover",children:[Object(g.jsx)("label",{name:t,className:"col-3 reset",onClick:function(e){return O(e,o,c)},children:t}),Object(g.jsx)("div",{className:"col-8",children:Object(g.jsx)("input",{id:t,name:t,className:"form-range slider",type:"range",min:r,max:i,step:s,value:l,onChange:function(e){return c(e,o)}})}),Object(g.jsx)("span",{name:t,className:"col-1 reset",onClick:function(e){return O(e,o,c)},children:l})]})})},v=n.p+"static/media/WP.394371ca.png",N=window.Caman;function y(e){var t=e.preset,n=e.presetName,c=e.onClick,r=e.active,i=Object(a.useRef)(),s=i.current,o=j.a.getInstance(s);return o||(o=new j.a(s,{toggle:"button"})),Object(g.jsx)("div",{className:"col p-1 d-grid",children:Object(g.jsx)("button",{className:"btn btn-primary ".concat(r?"active":null),ref:i,id:t,onClick:function(e){c(e)},type:"button",children:"".concat(n)})})}function w(e){var t,n=e.presetList,a=e.onClick,c=["Vintage","Lomo","Clarity","Sin City","Sunrise","Cross Process","Orange Peel","Love","Grungy","Jarques","Pinhole","Old Boot","Glowing Sun","Hazy Days","Her Majesty","Nostalgia","Hemingway","Concentrate"],r=[],i=Object(b.a)(["vintage","lomo","clarity","sinCity","sunrise","crossProcess","orangePeel","love","grungy","jarques","pinhole","oldBoot","glowingSun","hazyDays","herMajesty","nostalgia","hemingway","concentrate"].entries());try{for(i.s();!(t=i.n()).done;){var s=Object(m.a)(t.value,2),o=s[0],l=s[1],d=!!n[l];r.push(Object(g.jsx)(y,{preset:l,presetName:c[o],onClick:a,active:d},l))}}catch(u){i.e(u)}finally{i.f()}return r}function C(e,t){for(var n={},a={min:-100,init:0,max:100},c=0,r=["brightness","contrast","vibrance","saturation","exposure"];c<r.length;c++){n[r[c]]=a}for(var i={min:0,init:0,max:100},s=0,o=["hue","sepia","noise","sharpen","clip"];s<o.length;s++){n[o[s]]=i}n=Object(u.a)(Object(u.a)({},n),{gamma:{min:0,init:1,max:10,step:.1}});var l=[];for(var d in n)l.push(Object(g.jsx)(x,{filter:d,range:n[d],filterList:e,onChange:t},d));return l}var k=!1,I={},S={},E=0,R=function(){},D=f()((function(e){return R(e)}),1e3);N.Event.listen("processStart",(function(e){k=!0})),N.Event.listen("processComplete",(function(e){k=!1,E=0,JSON.stringify(I)!==JSON.stringify(S)&&D(S)}));var P="#canvas";N(P,v,(function(){this.render()}));var J=function(){var e=Object(a.useState)({}),t=Object(m.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)({}),i=Object(m.a)(r,2),s=i[0],b=i[1],j=Object(a.useState)({}),h=Object(m.a)(j,2),O=h[0],x=h[1],y=Object(a.useState)(!1),D=Object(m.a)(y,2),J=D[0],L=D[1],F=Object(a.useState)(""),A=Object(m.a)(F,2),B=A[0],G=A[1],M=Object(a.useState)({}),U=Object(m.a)(M,2),H=U[0],T=U[1],q=Object(a.useRef)(null),z=Object(a.useRef)(null);R=W;var V=Object(a.useRef)(f()((function(e){return W(e)}),100));Object(a.useEffect)((function(){JSON.stringify(I)!==JSON.stringify(O)&&(k||(E&&(k=!0),V.current(O),E+=1))}),[O]),Object(a.useEffect)((function(){var e=Object(u.a)(Object(u.a)({},n),s);x(S=e)}),[s,n]);function W(e){I=e,N(P,(function(){for(var t in console.log("~~~~ UPDATE IMAGE ~~~~"),console.log(e),this.revert(!1),e){if(!this[t]){console.log("".concat(t," is not a valid filter."));var n=Object(u.a)({},e);return delete n[t],this.render(),void x(n)}this[t](e[t])}this.render()}))}function _(e){var t=new FileReader;e&&(G(e.name),t.readAsDataURL(e)),t.onload=function(){var e=new Image;e.src=t.result,e.onload=function(){!function(e){var t=q.current.firstChild,n=t.getContext("2d");t.width=e.width,t.height=e.height,n.drawImage(e,0,0,e.width,e.height),t.removeAttribute("data-caman-id"),W(O)}(e)}}}function K(){return(K=Object(l.a)(o.a.mark((function e(){var t,n,a,c,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=z.current,n=t.value,a=/\w{7}/g,!(c=/\/gallery\/|\/a\//g).test(n)){e.next=13;break}return r=(r=n.split(c)[1]).substring(0,7),e.next=9,Object(p.a)(r);case 9:r=e.sent,console.log(r),e.next=19;break;case 13:if(!a.test(n)){e.next=18;break}r=n.match(a)[0],console.log(r),e.next=19;break;case 18:return e.abrupt("return");case 19:try{Object(p.b)(r,T)}catch(i){console.error(i)}case 20:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(a.useEffect)((function(){Object(p.c)(H.link,H.id).then((function(e){return _(e)})).catch((function(e){return console.error(e)}))}),[H]),Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)("div",{id:"editPane",ref:q,className:"edit-pane bg-gray container-lg text-center p-4 lh-1",children:Object(g.jsx)("img",{id:"canvas",alt:"Editing Canvas",className:"img-fluid",src:v})}),Object(g.jsxs)("div",{className:"row my-3 d-flex align-items-end",children:[Object(g.jsxs)("div",{className:"col",children:[Object(g.jsx)("label",{htmlFor:"formImgur",className:"form-label",children:"Import Image from or Upload to Imgur"}),Object(g.jsx)("input",{className:"form-control",id:"formImgur",ref:z,type:"text",placeholder:"https://imgur.com/...","aria-labelledby":"formImgur",required:!0})]}),Object(g.jsx)("div",{className:"col col-auto text-center ps-0",children:Object(g.jsxs)("button",{id:"downloadImage",className:"btn btn-primary",type:"submit",onClick:function(){return K.apply(this,arguments)},children:[Object(g.jsx)("i",{className:"d-block d-md-none bi bi-cloud-download"}),Object(g.jsx)("span",{className:"d-none d-md-block",children:"Import from Imgur"})]})}),Object(g.jsx)("div",{className:"col col-auto text-center ps-0",children:Object(g.jsxs)("button",{id:"downloadImage",className:"btn btn-primary",onClick:function(){console.log("Export")},children:[Object(g.jsx)("i",{className:"d-block d-md-none bi bi-cloud-upload"}),Object(g.jsx)("span",{className:"d-none d-md-block",children:"Upload to Imgur"})]})})]}),Object(g.jsxs)("div",{className:"row my-3 d-flex align-items-end",children:[Object(g.jsxs)("div",{className:"col",children:[Object(g.jsx)("label",{htmlFor:"formFile",className:"form-label",children:"Upload Image from Device"}),Object(g.jsx)("input",{className:"form-control",type:"file",id:"formFile",accept:"image/*","aria-labelledby":"formFile",onChange:function(e){_(e.target.files[0])}})]}),Object(g.jsx)("div",{className:"col col-auto text-center ps-0",children:Object(g.jsxs)("button",{id:"downloadImage",className:"btn btn-primary",onClick:function(){var e=B?"carmen-edited_"+B:"carmen-edited.jpg";console.log("Boop! Downloading",e);var t=q.current.firstChild,n=document.createElement("a");n.download=e,n.href=t.toDataURL("image/jpeg",1);var a=new MouseEvent("click");n.dispatchEvent(a)},children:[Object(g.jsx)("i",{className:"d-block d-md-none bi bi-download"}),Object(g.jsx)("span",{className:"d-none d-md-block",children:"Download Image"})]})})]}),Object(g.jsx)("div",{id:"filterHolder",children:Object(g.jsxs)("div",{id:"filterList",className:"container overflow-hidden bg-dark text-center my-3 p-2",children:[Object(g.jsx)("div",{className:"row row-cols-1 row-cols-md-2 center",children:C(s,(function(e,t){var n,a=e.target.name,c=parseFloat(e.target.value);console.log("Updating",a),c===t?delete(n=Object(u.a)({},s))[a]:n=Object(u.a)(Object(u.a)({},s),{},Object(d.a)({},a,c)),b(n)}))}),Object(g.jsx)("hr",{}),Object(g.jsxs)("div",{className:"py-2",children:[Object(g.jsxs)("button",{className:"btn btn-primary",onClick:function(){L(!J)},"data-bs-target":"#collapseTarget","data-bs-toggle":"collapse",children:[Object(g.jsx)("i",{className:"px-2 bi "+(J?"bi-chevron-compact-up":"bi-chevron-compact-down")}),"Presets",Object(g.jsx)("i",{className:"px-2 bi "+(J?"bi-chevron-compact-up":"bi-chevron-compact-down")})]}),Object(g.jsx)("div",{className:"collapse pt-2",id:"collapseTarget",children:Object(g.jsx)("div",{className:"row row-cols-2 row-cols-sm-3 row-cols-md-4 row-cols-lg-6 m-1",children:Object(g.jsx)(w,{presetList:n,onClick:function(e){var t=e.target.id,a={};n[t]||(a[t]=1),c(a)}})})})]})]})})]})};var L=function(){return Object(g.jsxs)("div",{className:"App container text-light",children:[Object(g.jsxs)("div",{className:"bg-dark px-4 py-1 my-3",children:[Object(g.jsxs)("h1",{className:"text-primary display-2",children:[Object(g.jsx)("i",{className:"bi bi-image-fill"})," Carmen"]}),Object(g.jsxs)("div",{children:["Caman + React ",Object(g.jsx)("span",{className:"vertical-line",children:" "}),"Browser Based Image Editing ",Object(g.jsx)("span",{className:"vertical-line",children:" "}),Object(g.jsx)("a",{href:"http://camanjs.com/",children:"CamanJS"})," ",Object(g.jsx)("span",{className:"vertical-line",children:" "}),Object(g.jsx)("a",{href:"https://github.com/Martination/carmen",children:"GitHub Repo"})]})]}),Object(g.jsx)(J,{}),Object(g.jsxs)("div",{className:"text-center pb-3",children:["\xa9 2021 ",Object(g.jsx)("a",{href:"https://martination.github.io/",children:"Martin Green"})]})]})};n(92);i.a.render(Object(g.jsx)(c.a.StrictMode,{children:Object(g.jsx)(L,{})}),document.getElementById("root"))}},[[93,1,2]]]);
//# sourceMappingURL=main.83105c51.chunk.js.map